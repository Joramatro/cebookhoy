var $Apprise=null,$overlay=null,$body=null,$window=null,$cA=null,AppriseQueue=[];$(function(){$Apprise=$('<div class="apprise">');$overlay=$('<div class="apprise-overlay">');$body=$("body");$window=$(window);$body.append($overlay.css("opacity",".40000000")).append($Apprise)});
function Apprise(a,g){if(void 0===a||!a)return!1;var c=this,e=$('<div class="apprise-inner">'),f=$('<div class="apprise-buttons">'),d=$('<input type="text">'),b={animation:700,buttons:{confirm:{action:function(){c.dissapear()},className:"#F87F0E",id:"confirm",text:"Ok"}},input:!1,override:!0};$.extend(b,g);"close"==a?$cA.dissapear():$Apprise.is(":visible")?AppriseQueue.push({text:a,options:b}):(this.adjustWidth=function(){$window.width();$Apprise.css("width","20%").css("left","40%")},this.dissapear=
function(){$Apprise.animate({top:"-100%"},b.animation,function(){$overlay.fadeOut(300);$Apprise.hide();$window.unbind("beforeunload");$window.unbind("keydown");AppriseQueue[0]&&(Apprise(AppriseQueue[0].text,AppriseQueue[0].options),AppriseQueue.splice(0,1))})},this.keyPress=function(){$window.bind("keydown",function(a){27===a.keyCode?b.buttons.cancel?$("#apprise-btn-"+b.buttons.cancel.id).trigger("click"):c.dissapear():13===a.keyCode&&(b.buttons.confirm?$("#apprise-btn-"+b.buttons.confirm.id).trigger("click"):
c.dissapear())})},$.each(b.buttons,function(b,a){if(a){var c=$('<button id="apprise-btn-'+a.id+'">').append(a.text);a.className&&c.addClass(a.className);f.append(c);c.on("click",function(){var b={clicked:a,input:d.val()?d.val():null};a.action(b)})}}),b.override&&$window.bind("beforeunload",function(a){return"An alert requires attention"}),c.adjustWidth(),$window.resize(function(){c.adjustWidth()}),$Apprise.html("").append(e.append('<div class="apprise-content">'+a+"</div>")).append(f),$cA=this,b.input&&
e.find(".apprise-content").append($('<div class="apprise-input">').append(d)),$overlay.fadeIn(300),$Apprise.show().animate({top:"20%"},b.animation,function(){c.keyPress()}),b.input&&d.focus())};